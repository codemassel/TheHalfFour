<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">
    <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
    <title>Adminpanel</title>
</head>
<body class="bg-white text-black">

<!-- Navbar -->
<script type="text/javascript" th:src="@{/js/adminscripts.js}"></script>
<script type="text/javascript" th:src="@{/js/script.js}"></script>

<div th:include="fragment/header :: header"></div>

<div class="container mt-5">
    <div class="row justify-content-center">
        <!-- Buttons -->
        <div class="col-md-12 mb-4 text-center">
            <button type="button" class="btn btn-primary mr-2" onclick="toggleTable('benutzer')">Benutzerverwaltung anzeigen</button>
            <button type="button" class="btn btn-primary mr-2" onclick="toggleTable('yachten')">Yachtverwaltung anzeigen</button>
            <button type="button" class="btn btn-primary" onclick="toggleTable('bestellungen')">Bestellungsverwaltung anzeigen</button>
        </div>
        <!-- 1. card -->
        <div class="col-md-12" id="benutzer" style="display: none;">
            <!-- Benutzerliste -->
            <div class="card mb-4">
                <div class="card-header">
                    Benutzer
                </div>
                <div class="card-body">
                    <div class="table-responsive">
                        <table class="table">
                            <thead>
                            <tr>
                                <th>ID</th>
                                <th>Vorname</th>
                                <th>Nachname</th>
                                <th>Email</th>
                                <th>PLZ</th>
                                <th>Stadt</th>
                                <th>Straße</th>
                                <th>Hausnummer</th>
                            </tr>
                            </thead>
                            <tbody>
                            <tr th:each="customer : ${customers}" th:id="'userRow_' + ${customer.id}" onclick="populateUserData(${customer.id})">
                                <td th:text="${customer.id}"></td>
                                <td th:text="${customer.firstName}"></td>
                                <td th:text="${customer.lastName}"></td>
                                <td th:text="${customer.emailId}"></td>
                                <td th:text="${customer.zipcode.zipcode}"></td>
                                <td th:text="${customer.zipcode.city}"></td>
                                <td th:text="${customer.street}"></td>
                                <td th:text="${customer.houseNumber}"></td>
                            </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>

            <!-- Benutzerverwaltungsform -->
            <div class="card">
                <div class="card-header">
                    Benutzer bearbeiten
                </div>
                <div class="card-body">
                    <form method="post" th:action="@{/index/updateCustomer}" th:object="${customer}" class="col card p-3 mb-5">
                        <div class="form-group">
                            <label for="selectedUser">Ausgewählter Benutzer</label>
                            <select class="form-control" id="selectedUser" name="selectedUser" onchange="populateUserData(this.value)">
                                <option th:each="customer : ${customers}" th:value="${customer.id}" th:text="${customer.firstName + ' ' + customer.lastName}"></option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="firstName">Vorname</label>
                            <input type="text" class="form-control" id="firstName" th:field="*{firstName}">
                        </div>
                        <div class="form-group">
                            <label for="lastName">Nachname</label>
                            <input type="text" class="form-control" id="lastName" th:field="*{lastName}">
                        </div>
                        <div class="form-group">
                            <label for="emailId">E-Mail-Adresse</label>
                            <input type="email" class="form-control" id="emailId" th:field="*{emailId}">
                        </div>
                        <div class="form-group">
                            <label for="zipcode">PLZ</label>
                            <input type="text" class="form-control" id="zipcode" th:field="*{zipcode.zipcode}">
                        </div>
                        <div class="form-group">
                            <label for="city">Stadt</label>
                            <input type="text" class="form-control" id="city" th:field="*{zipcode.city}">
                        </div>
                        <div class="form-group">
                            <label for="street">Straße</label>
                            <input type="text" class="form-control" id="street" th:field="*{street}">
                        </div>
                        <div class="form-group">
                            <label for="houseNumber">Hausnummer</label>
                            <input type="text" class="form-control" id="houseNumber" th:field="*{houseNumber}">
                        </div>
                        <div class="form-group">
                            <label for="customerId">ID</label>
                            <input type="text" class="form-control" id="customerId" th:field="*{id}" readonly>
                        </div>
                        <button type="submit" class="btn btn-primary">Benutzer aktualisieren</button>
                    </form>
                </div>
            </div>
        </div>

        <!-- 2. card -->
        <!-- 2. card -->
        <div class="col-md-12" id="yachten" style="display: none;">
            <!-- Yachtenliste -->
            <div class="card mb-4">
                <div class="card-header">
                    Yachten
                </div>
                <div class="card-body">
                    <div class="table-responsive">
                        <table class="table">
                            <thead>
                            <tr>
                                <th>ID</th>
                                <th>Yacht</th>
                                <th>Preis</th>
                                <th>Beschreibung</th>
                            </tr>
                            </thead>
                            <tbody>
                            <tr th:each="shopItem : ${shopItems}" th:id="'shopitemRow_' + ${shopItem.id}" onclick="populateShopitemData(${shopItem.id})">
                                <td th:text="${shopItem.id}"></td>
                                <td th:text="${shopItem.itemName}"></td>
                                <td th:text="${shopItem.itemPrice}"></td>
                                <td th:text="${shopItem.description}"></td>
                            </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>

            <!-- Warenverwaltungsform -->
            <div class="card">
                <div class="card-header">
                    Yachten bearbeiten
                </div>
                <div class="card-body">
                    <form method="post" th:action="@{/yachts/updateShopItem}" th:object="${shopItem}" class="col card p-3 mb-5">
                        <div class="form-group">
                            <label for="selectedUser">Ausgewählte Yacht</label>
                            <select class="form-control" id="selectedShopItem" name="selectedShopItem" onchange="populateShopItemData(this.value)">
                                <option th:each="shopItem : ${shopItems}" th:value="${shopItem.id}" th:text="${shopItem.itemName}"></option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="itemName">Yacht</label>
                            <input type="text" class="form-control" id="itemName" th:field="*{itemName}">
                        </div>
                        <div class="form-group">
                            <label for="itemPrice">Preis</label>
                            <input type="text" class="form-control" id="itemPrice" th:field="*{itemPrice}">
                        </div>
                        <div class="form-group">
                            <label for="description">Beschreibung</label>
                            <input type="text" class="form-control" id="description" th:field="*{description}">
                        </div>
                        <div class="form-group">
                            <label for="shopItemId">ID</label>
                            <input type="text" class="form-control" id="shopItemId" th:field="*{id}" readonly>
                        </div>
                        <button type="submit" class="btn btn-primary">Yacht aktualisieren</button>
                    </form>
                </div>
            </div>
        </div>

        <!-- 3. Card -->
        <div class="col-md-12" id="bestellungen" style="display: none;">
            <!-- Bestellungen -->
            <div class="card mb-4">
                <div class="card-header">
                    Bestellungen
                </div>
                <div class="card-body">
                    <div class="table-responsive">
                        <table class="table">
                            <thead>
                            <tr>
                                <th>Bestellungs-ID</th>
                                <th>Kunde</th>
                                <th>Yacht</th>
                                <th>Priorität</th>
                                <th>Status</th>
                                <th>Rabatt</th>
                                <th>Bestelldatum</th>
                            </tr>
                            </thead>
                            <tbody>
                            <tr th:each="order : ${orders}" th:id="'orderRow_' + ${order.id}" onclick="populateOrderData(${customer.id})">
                                <td th:text="${order.id}"></td>
                                <td th:text="${order.customer.firstName + ' ' + order.customer.lastName}"></td>
                                <td th:text="${order.shopitems.itemName}"></td>
                                <td th:text="${order.priority}"></td>
                                <td th:text="${order.status}"></td>
                                <td th:text="${order.discount}"></td>
                                <td th:text="${order.creationDate}"></td>
                            </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>

            <!-- Bestellungensform -->
            <div class="card">
                <div class="card-header">
                    Bestellungen bearbeiten
                </div>
                <div class="card-body">
                    <form method="post" th:action="@{/orders/updateOrder}" th:object="${order}" class="col card p-3 mb-5">
                        <div class="form-group">
                            <label for="selectedUser">Ausgewählte Bestellung</label>
                            <select class="form-control" id="selectedOrder" name="selectedOrder" onchange="populateOrderData(this.value)">
                                <option th:each="order : ${orders}" th:value="${order.id}" th:text="${order.customer.firstName + ' ' + order.customer.lastName}"></option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="customer">Kunde</label>
                            <input type="text" class="form-control" id="customer" th:field="*{customer}">
                        </div>
                        <div class="form-group">
                            <label for="priority">Priorität</label>
                            <input type="text" class="form-control" id="priority" th:field="*{priority}">
                        </div>
                        <div class="form-group">
                            <label for="status">Status</label>
                            <input type="text" class="form-control" id="status" th:field="*{status}">
                        </div>
                        <div class="form-group">
                            <label for="discount">Rabatt</label>
                            <input type="text" class="form-control" id="discount" th:field="*{discount}">
                        </div>
                        <div class="form-group">
                            <label for="creationDate">Bestelldatum</label>
                            <input type="text" class="form-control" id="creationDate" th:field="*{creationDate}">
                        </div>
                        <div class="form-group">
                            <label for="orderId">ID</label>
                            <input type="text" class="form-control" id="orderId" th:field="*{id}" readonly>
                        </div>
                        <button type="submit" class="btn btn-primary">Bestellung aktualisieren</button>
                    </form>
                </div>
            </div>
        </div>
    </div>
</div>

<div th:include="fragment/footer :: footer"></div>

<script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.5.3/dist/umd/popper.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-C6RzsynM9kWDrMNeT87bh95OGNyZPhcTNXj1NW7RuBCsyN/o0jlpcV8Qyq46cDfL" crossorigin="anonymous"></script></body>
</html>
